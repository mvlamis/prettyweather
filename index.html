<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Pretty Weather</title>
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Space Grotesk">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
            integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    </head>

    <body> 
        <h1 id="title">Placeholder</h1>
        <div class="info">
            <h3 id="temperature">Placeholder</h3>
            <h3 id="condition">Placeholder</h3>
            <h3 id="winddirection">Placeholder</h3>
            <h3 id="windspeed">Placeholder</h3>
            <h3 id="humidity">Placeholder</h3>
        </div>
        
        <script>
            // get city and api key from settings.json
            fetch ("settings.json")
                .then(response => response.json())
                .then(settings => {
                    document.getElementById("title").innerHTML = "Current weather in " + settings.city;
                    document.getElementById("temperature").innerHTML = "beans!";
                    console.log("https://api.weatherapi.com/v1/current.json?key=" + settings.apiKey + "&q=" + settings.city + "&units=metric");
                    // get weather data from weatherapi.com
                    fetch ("https://api.weatherapi.com/v1/current.json?key=" + settings.apiKey + "&q=" + settings.city + "&units=metric")
                        .then(response => response.json())
                        .then(data => {
                            console.log(data);
                            document.getElementById("temperature").innerHTML = data.current.temp_c;
                            document.getElementById("condition").innerHTML = data.current.condition.text;
                            document.getElementById("winddirection").innerHTML = data.current.wind_dir;
                            document.getElementById("windspeed").innerHTML = data.current.wind_kph;
                            document.getElementById("humidity").innerHTML = data.current.humidity;

                            if (data.current.temp_c < 0) {
                                document.body.style.backgroundColor = "lightblue";
                            } else if (data.current.temp_c < 10) {
                                document.body.style.backgroundColor = "lightgreen";
                            } else if (data.current.temp_c < 20) {
                                document.body.style.backgroundColor = "yellow";
                            } else if (data.current.temp_c < 30) {
                                document.body.style.backgroundColor = "orange";
                            } else {
                                document.body.style.backgroundColor = "red";
                            }

                            if (data.current.condition = "Light snow") {
                                document.body.style.backgroundImage = "url('conditionImages/snowy.png')";
                            }

                            
                        });

                });

            
            
        </script>


    </body>
</html>
